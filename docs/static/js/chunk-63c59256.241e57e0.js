(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63c59256"],{"0323":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"产品标题"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),r("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),r("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("新增产品")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.productList,border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{label:"ID",prop:"id",width:"80px",align:"center"}}),r("el-table-column",{attrs:{label:"标题",prop:"title","min-width":"150px"}}),r("el-table-column",{attrs:{label:"发布时间",prop:"releaseTime",width:"180px",align:"center"}}),r("el-table-column",{attrs:{label:"状态",prop:"status",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("el-tag",{attrs:{type:1===n.status?"success":"info"}},[t._v(t._s(1===n.status?"已发布":"草稿"))])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"300px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleEdit(n)}}},[t._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.confirmDelete(n)}}},[t._v("删除")])]}}])})],1),r("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":t.listQuery.pageNo,"page-sizes":[10,20,50,100],"page-size":t.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),r("el-dialog",{attrs:{visible:t.dialogVisible,title:"产品管理"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-form",{attrs:{model:t.currentProduct,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"品牌"}},[r("el-select",{attrs:{placeholder:"选择品牌"},model:{value:t.currentProduct.brandCode,callback:function(e){t.$set(t.currentProduct,"brandCode",e)},expression:"currentProduct.brandCode"}},t._l(t.brandList,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.code}})})),1)],1),r("el-form-item",{attrs:{label:"标题"}},[r("el-input",{model:{value:t.currentProduct.title,callback:function(e){t.$set(t.currentProduct,"title",e)},expression:"currentProduct.title"}})],1),r("el-form-item",{attrs:{label:"描述"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.currentProduct.description,callback:function(e){t.$set(t.currentProduct,"description",e)},expression:"currentProduct.description"}})],1),r("el-form",{attrs:{model:t.currentProduct,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"分类"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",placeholder:"选择分类"},model:{value:t.currentProduct.categoryCodes,callback:function(e){t.$set(t.currentProduct,"categoryCodes",e)},expression:"currentProduct.categoryCodes"}},t._l(t.categoryOptions,(function(t){return r("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1)],1),r("el-form-item",{attrs:{label:"标题"}},[r("el-input",{model:{value:t.currentProduct.title,callback:function(e){t.$set(t.currentProduct,"title",e)},expression:"currentProduct.title"}})],1)],1),r("el-form-item",{attrs:{label:"图片"}},[r("el-upload",{attrs:{"file-list":t.fileList,"auto-upload":!0,action:"",accept:"image/*","on-change":t.handleFileChange,"http-request":t.uploadFile,multiple:""}},[r("el-button",{attrs:{type:"primary"}},[t._v("选择图片")])],1),t.currentProduct.pictures.length||t.fileList.length?r("div",{staticStyle:{"margin-top":"10px",display:"flex","flex-wrap":"wrap"}},t._l(t.uniquePictures,(function(e,n){return r("div",{key:n,staticStyle:{position:"relative","margin-right":"10px","margin-bottom":"10px"}},[r("img",{staticStyle:{width:"100px",height:"60px","border-radius":"5px",border:"1px solid #e0e0e0"},attrs:{src:e.url||e,alt:"Product Image"}}),r("el-button",{staticStyle:{position:"absolute",top:"0",right:"0","border-radius":"50%",padding:"0",width:"20px",height:"20px"},attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.deleteImage(n)}}},[r("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"12px"}})])],1)})),0):t._e()],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("保存")])],1)],1)],1)},a=[],o=r("2909"),i=r("5530"),c=r("c7eb"),u=r("1da1"),s=(r("99af"),r("4de4"),r("a630"),r("d81d"),r("a434"),r("d3b7"),r("6062"),r("3ca3"),r("4d90"),r("159b"),r("ddb0"),r("7c15")),l=r("5c96");function d(t){var e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0");return"".concat(e,"-").concat(r,"-").concat(n," ").concat(a,":").concat(o,":").concat(i)}var p={data:function(){return{listQuery:{title:"",pageNo:1,pageSize:10},categoryOptions:[],productList:[],total:0,dialogVisible:!1,brandList:[],keywordOptions:[],currentProduct:{id:null,categoryCode:"",categoryCodes:[],brandCode:"",title:"",description:"",keyWords:[],pictures:[],productDetail:"",releaseTime:d(new Date),status:"1"},fileList:[]}},created:function(){this.fetchProductList(),this.fetchBrandList(),this.fetchKeywordOptions(),this.fetchCategoryOptions()},computed:{uniquePictures:function(){var t=new Set;return this.currentProduct.pictures.forEach((function(e){t.add(e)})),this.fileList.forEach((function(e){t.add(e.url||e)})),Array.from(t).map((function(t){return{url:t}}))}},methods:{fetchCategoryOptions:function(){var t=this;return Object(u["a"])(Object(c["a"])().mark((function e(){var r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["n"])({pageNo:1,pageSize:1e3,condition:{name:""}});case 2:r=e.sent,t.categoryOptions=r.data.records;case 4:case"end":return e.stop()}}),e)})))()},fetchBrandList:function(){var t=this;return Object(u["a"])(Object(c["a"])().mark((function e(){var r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["m"])({pageNo:1,pageSize:20,title:""});case 2:r=e.sent,t.brandList=r.data.records;case 4:case"end":return e.stop()}}),e)})))()},fetchKeywordOptions:function(){var t=this;return Object(u["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.keywordOptions=[{value:"keyword1",label:"关键词1"},{value:"keyword2",label:"关键词2"},{value:"keyword3",label:"关键词3"}];case 1:case"end":return e.stop()}}),e)})))()},fetchProductList:function(){var t=this;return Object(u["a"])(Object(c["a"])().mark((function e(){var r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["q"])({pageNo:t.listQuery.pageNo,pageSize:t.listQuery.pageSize,condition:{title:t.listQuery.title,status:"1"}});case 2:r=e.sent,t.productList=r.data.records,t.total=r.data.total;case 5:case"end":return e.stop()}}),e)})))()},handleFilter:function(){this.listQuery.pageNo=1,this.fetchProductList()},handleCreate:function(){this.currentProduct={id:null,categoryCode:"",brandCode:"",title:"",description:"",keyWords:[],pictures:[],productDetail:"",releaseTime:d(new Date),status:"1"},this.fileList=[],this.dialogVisible=!0},handleSave:function(){var t=this;return Object(u["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.fileList=t.fileList.filter((function(t){return t&&t.url})),t.currentProduct.pictures=t.fileList.map((function(t){return t.url})).filter((function(t){return t})),!t.currentProduct.id){e.next=7;break}return e.next=5,Object(s["x"])(t.currentProduct);case 5:e.next=9;break;case 7:return e.next=9,Object(s["e"])(t.currentProduct);case 9:t.dialogVisible=!1,t.fetchProductList();case 11:case"end":return e.stop()}}),e)})))()},handleEdit:function(t){var e=this;return Object(u["a"])(Object(c["a"])().mark((function r(){return Object(c["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.fileList=[],e.currentProduct=Object(i["a"])({},t),e.currentProduct.pictures=t.pictures||[],e.fileList=e.currentProduct.pictures.map((function(t){return{name:t.split("/").pop(),url:t}})),e.dialogVisible=!0;case 5:case"end":return r.stop()}}),r)})))()},confirmDelete:function(t){var e=this;l["MessageBox"].confirm("确定要删除这个产品吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.handleDelete(t)}))},handleDelete:function(t){var e=this;return Object(u["a"])(Object(c["a"])().mark((function r(){return Object(c["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(s["j"])(t.id);case 2:e.fetchProductList();case 3:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(t){this.listQuery.pageSize=t,this.fetchProductList()},handleCurrentChange:function(t){this.listQuery.pageNo=t,this.fetchProductList()},handleFileChange:function(t,e){var r=this;return Object(u["a"])(Object(c["a"])().mark((function t(){var n,a;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.filter((function(t){return!r.fileList.some((function(e){return e.url===t.url}))})),(n=r.fileList).push.apply(n,Object(o["a"])(a));case 2:case"end":return t.stop()}}),t)})))()},uploadFile:function(t){var e=this;return Object(u["a"])(Object(c["a"])().mark((function r(){var n;return Object(c["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(s["A"])(t.file);case 3:n=r.sent,e.fileList.push(n),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),console.error("图片上传失败:",r.t0);case 10:return r.abrupt("return",!1);case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))()},deleteImage:function(t){if(t<this.fileList.length)this.fileList.splice(t,1);else{var e=t-this.fileList.length;this.currentProduct.pictures.splice(e,1)}},handleKeywordsChange:function(t){this.currentProduct.keyWords=t}}},f=p,h=r("2877"),b=Object(h["a"])(f,n,a,!1,null,null,null);e["default"]=b.exports},"7c15":function(t,e,r){"use strict";r.d(e,"r",(function(){return c})),r.d(e,"y",(function(){return u})),r.d(e,"k",(function(){return s})),r.d(e,"l",(function(){return l})),r.d(e,"a",(function(){return d})),r.d(e,"t",(function(){return p})),r.d(e,"f",(function(){return f})),r.d(e,"s",(function(){return h})),r.d(e,"p",(function(){return b})),r.d(e,"i",(function(){return m})),r.d(e,"o",(function(){return g})),r.d(e,"w",(function(){return y})),r.d(e,"d",(function(){return w})),r.d(e,"n",(function(){return v})),r.d(e,"c",(function(){return O})),r.d(e,"v",(function(){return j})),r.d(e,"h",(function(){return C})),r.d(e,"b",(function(){return x})),r.d(e,"u",(function(){return k})),r.d(e,"g",(function(){return N})),r.d(e,"m",(function(){return S})),r.d(e,"e",(function(){return P})),r.d(e,"x",(function(){return L})),r.d(e,"j",(function(){return z})),r.d(e,"q",(function(){return D})),r.d(e,"A",(function(){return _})),r.d(e,"z",(function(){return F}));var n=r("c7eb"),a=r("1da1"),o=(r("a4d3"),r("e01a"),r("b0c0"),r("b775")),i=r("5f87");function c(t){return Object(o["a"])({url:"/user/page",method:"post",data:{pageNo:t.pageNo||1,pageSize:t.pageSize||10,condition:{title:t.title||"",categoryCode:t.categoryCode||"",status:t.status||"1"}}})}function u(t){return Object(o["a"])({url:"/user",method:"put",data:{userId:t.userId,nickName:t.nickName,avatar:t.avatar,sex:t.sex}})}function s(t){return Object(o["a"])({url:"/user/".concat(t),method:"delete"})}function l(t){return Object(o["a"])({url:"/album/page",method:"post",data:{pageNo:0,pageSize:10,condition:{name:""}}})}function d(t){return Object(o["a"])({url:"/album",method:"post",data:{name:t.name,picNum:t.picNum,sortNo:t.sortNo,description:t.description,picture:t.picture}})}function p(t){return Object(o["a"])({url:"/album",method:"put",data:{id:t.id,name:t.name,picNum:t.picNum,sortNo:t.sortNo,description:t.description,picture:t.picture}})}function f(t){return Object(o["a"])({url:"/album/".concat(t),method:"delete"})}function h(t){return Object(o["a"])({url:"/auth/login",method:"post",data:t})}function b(t){return Object(o["a"])({url:"/news/page",method:"post",data:{pageNo:t.pageNo||1,pageSize:t.pageSize||10,condition:{title:t.title||null,categoryCode:t.categoryCode||null,status:t.status||null}}})}function m(t){return Object(o["a"])({url:"/news/".concat(t),method:"delete"})}function g(t){return Object(o["a"])({url:"/news/".concat(t),method:"get"})}function y(t){return Object(o["a"])({url:"/news",method:"put",data:{id:t.id,title:t.title,categoryCode:t.categoryCode,pictures:t.pictures||[],keyWords:t.keyWords||[],sortNo:t.sortNo||0,productIds:t.productIds||[],status:t.status,releaseTime:t.releaseTime,newsDetail:t.newsDetail}})}function w(t){return Object(o["a"])({url:"/news",method:"post",data:{title:t.title,categoryCode:t.categoryCode,pictures:t.pictures||[],keyWords:t.keyWords||[],sortNo:t.sortNo||0,productIds:t.productIds||[],status:t.status,releaseTime:t.releaseTime,newsDetail:t.newsDetail}})}function v(t){var e,r,n,a;return Object(o["a"])({url:"/category/page",method:"post",data:{pageNo:t.pageNo||1,pageSize:t.pageSize||100,condition:{code:(null===(e=t.condition)||void 0===e?void 0:e.code)||null,name:(null===(r=t.condition)||void 0===r?void 0:r.name)||null,parentCode:(null===(n=t.condition)||void 0===n?void 0:n.parentCode)||null,groupCode:(null===(a=t.condition)||void 0===a?void 0:a.groupCode)||null}}})}function O(t){return Object(o["a"])({url:"/category",method:"post",data:{code:t.code,name:t.name,parentCode:t.parentCode,groupCode:t.groupCode,sortNo:t.sortNo}})}function j(t){return Object(o["a"])({url:"/category",method:"put",data:{id:t.id,code:t.code,name:t.name,parentCode:t.parentCode,groupCode:t.groupCode,sortNo:t.sortNo}})}function C(t){return Object(o["a"])({url:"/category/".concat(t),method:"delete"})}function x(t){return Object(o["a"])({url:"/brand",method:"post",data:{code:t.code,name:t.name,sortNo:t.sortNo}})}function k(t){return Object(o["a"])({url:"/brand",method:"put",data:{id:t.id,code:t.code,name:t.name,sortNo:t.sortNo}})}function N(t){return Object(o["a"])({url:"/brand/".concat(t),method:"delete"})}function S(t){return Object(o["a"])({url:"/brand/page",method:"post",data:{pageNo:t.pageNo||1,pageSize:t.pageSize||10,condition:{title:t.title||"",categoryCode:t.categoryCode||"",status:t.status||"1"}}})}function P(t){return Object(o["a"])({url:"/product",method:"post",data:{categoryCode:t.categoryCode,brandCode:t.brandCode,title:t.title,description:t.description,keyWords:t.keyWords,pictures:t.pictures,productDetail:t.productDetail,sortNo:t.sortNo,releaseTime:t.releaseTime,status:"1"}})}function L(t){return Object(o["a"])({url:"/product",method:"put",data:{id:t.id,categoryCode:t.categoryCode,brandCode:t.brandCode,title:t.title,description:t.description,keyWords:t.keyWords,pictures:t.pictures,productDetail:t.productDetail,sortNo:t.sortNo,releaseTime:t.releaseTime,status:"1"}})}function z(t){return Object(o["a"])({url:"/product/".concat(t),method:"delete"})}function D(t){return Object(o["a"])({url:"/product/page",method:"post",data:{pageNo:t.pageNo,pageSize:t.pageSize,condition:{categoryCode:t.condition.categoryCode,brandCode:t.condition.brandCode,title:t.condition.title,status:t.condition.status||"1"}}})}function _(t){return T.apply(this,arguments)}function T(){return T=Object(a["a"])(Object(n["a"])().mark((function t(e){var r,a,c,u;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new FormData,r.append("file",e),a=Object(i["a"])(),console.log("Token in uploadFile method:",a),t.next=6,Object(o["a"])({url:"/file/upload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:r});case 6:if(c=t.sent,!c.success){t.next=12;break}return u=c.data.fileName,t.abrupt("return",{id:u,url:u});case 12:throw console.error("图片上传失败:",c.msg),new Error("图片上传失败");case 14:case"end":return t.stop()}}),t)}))),T.apply(this,arguments)}function F(t){return Q.apply(this,arguments)}function Q(){return Q=Object(a["a"])(Object(n["a"])().mark((function t(e){var r,a,c,u;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new FormData,r.append("file",e),a=Object(i["a"])(),console.log("Token in uploadAlbumFile method:",a),t.prev=4,t.next=7,Object(o["a"])({url:"/file/upload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:r});case 7:if(c=t.sent,console.log("Upload response in album method:",c),!c.success||"0"!==c.code){t.next=14;break}return u=c.data.fileName,t.abrupt("return",{id:u,url:u});case 14:throw console.error("相册图片上传失败:",c.msg),new Error(c.msg||"相册图片上传失败");case 16:t.next=22;break;case 18:throw t.prev=18,t.t0=t["catch"](4),console.error("相册上传文件过程中发生错误:",t.t0),t.t0;case 22:case"end":return t.stop()}}),t,null,[[4,18]])}))),Q.apply(this,arguments)}}}]);