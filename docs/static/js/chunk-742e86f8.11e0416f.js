(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-742e86f8"],{"0ae1":function(e,t,o){},"304a":function(e,t,o){"use strict";o("8301")},"565d":function(e,t,o){},"7c15":function(e,t,o){"use strict";o.d(t,"r",(function(){return s})),o.d(t,"y",(function(){return c})),o.d(t,"k",(function(){return u})),o.d(t,"l",(function(){return d})),o.d(t,"a",(function(){return l})),o.d(t,"t",(function(){return p})),o.d(t,"f",(function(){return m})),o.d(t,"s",(function(){return f})),o.d(t,"p",(function(){return g})),o.d(t,"i",(function(){return h})),o.d(t,"o",(function(){return b})),o.d(t,"w",(function(){return w})),o.d(t,"d",(function(){return y})),o.d(t,"n",(function(){return v})),o.d(t,"c",(function(){return C})),o.d(t,"v",(function(){return k})),o.d(t,"h",(function(){return O})),o.d(t,"b",(function(){return j})),o.d(t,"u",(function(){return N})),o.d(t,"g",(function(){return T})),o.d(t,"m",(function(){return x})),o.d(t,"e",(function(){return S})),o.d(t,"x",(function(){return F})),o.d(t,"j",(function(){return $})),o.d(t,"q",(function(){return D})),o.d(t,"A",(function(){return z})),o.d(t,"z",(function(){return q}));var n=o("c7eb"),r=o("1da1"),a=(o("a4d3"),o("e01a"),o("b0c0"),o("b775")),i=o("5f87");function s(e){return Object(a["a"])({url:"/user/page",method:"post",data:{pageNo:e.pageNo||1,pageSize:e.pageSize||10,condition:{title:e.title||"",categoryCode:e.categoryCode||"",status:e.status||"1"}}})}function c(e){return Object(a["a"])({url:"/user",method:"put",data:{userId:e.userId,nickName:e.nickName,avatar:e.avatar,sex:e.sex}})}function u(e){return Object(a["a"])({url:"/user/".concat(e),method:"delete"})}function d(e){return Object(a["a"])({url:"/album/page",method:"post",data:{pageNo:0,pageSize:10,condition:{name:""}}})}function l(e){return Object(a["a"])({url:"/album",method:"post",data:{name:e.name,picNum:e.picNum,sortNo:e.sortNo,description:e.description,picture:e.picture}})}function p(e){return Object(a["a"])({url:"/album",method:"put",data:{id:e.id,name:e.name,picNum:e.picNum,sortNo:e.sortNo,description:e.description,picture:e.picture}})}function m(e){return Object(a["a"])({url:"/album/".concat(e),method:"delete"})}function f(e){return Object(a["a"])({url:"/auth/login",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/news/page",method:"post",data:{pageNo:e.pageNo||1,pageSize:e.pageSize||10,condition:{title:e.title||null,categoryCode:e.categoryCode||null,status:e.status||null}}})}function h(e){return Object(a["a"])({url:"/news/".concat(e),method:"delete"})}function b(e){return Object(a["a"])({url:"/news/".concat(e),method:"get"})}function w(e){return Object(a["a"])({url:"/news",method:"put",data:{id:e.id,title:e.title,categoryCode:e.categoryCode,pictures:e.pictures||[],keyWords:e.keyWords||[],sortNo:e.sortNo||0,productIds:e.productIds||[],status:e.status,releaseTime:e.releaseTime,newsDetail:e.newsDetail}})}function y(e){return Object(a["a"])({url:"/news",method:"post",data:{title:e.title,categoryCode:e.categoryCode,pictures:e.pictures||[],keyWords:e.keyWords||[],sortNo:e.sortNo||0,productIds:e.productIds||[],status:e.status,releaseTime:e.releaseTime,newsDetail:e.newsDetail}})}function v(e){var t,o,n,r;return Object(a["a"])({url:"/category/page",method:"post",data:{pageNo:e.pageNo||1,pageSize:e.pageSize||100,condition:{code:(null===(t=e.condition)||void 0===t?void 0:t.code)||null,name:(null===(o=e.condition)||void 0===o?void 0:o.name)||null,parentCode:(null===(n=e.condition)||void 0===n?void 0:n.parentCode)||null,groupCode:(null===(r=e.condition)||void 0===r?void 0:r.groupCode)||null}}})}function C(e){return Object(a["a"])({url:"/category",method:"post",data:{code:e.code,name:e.name,parentCode:e.parentCode,groupCode:e.groupCode,sortNo:e.sortNo}})}function k(e){return Object(a["a"])({url:"/category",method:"put",data:{id:e.id,code:e.code,name:e.name,parentCode:e.parentCode,groupCode:e.groupCode,sortNo:e.sortNo}})}function O(e){return Object(a["a"])({url:"/category/".concat(e),method:"delete"})}function j(e){return Object(a["a"])({url:"/brand",method:"post",data:{code:e.code,name:e.name,sortNo:e.sortNo}})}function N(e){return Object(a["a"])({url:"/brand",method:"put",data:{id:e.id,code:e.code,name:e.name,sortNo:e.sortNo}})}function T(e){return Object(a["a"])({url:"/brand/".concat(e),method:"delete"})}function x(e){return Object(a["a"])({url:"/brand/page",method:"post",data:{pageNo:e.pageNo||1,pageSize:e.pageSize||10,condition:{title:e.title||"",categoryCode:e.categoryCode||"",status:e.status||"1"}}})}function S(e){return Object(a["a"])({url:"/product",method:"post",data:{categoryCode:e.categoryCode,brandCode:e.brandCode,title:e.title,description:e.description,keyWords:e.keyWords,pictures:e.pictures,productDetail:e.productDetail,sortNo:e.sortNo,releaseTime:e.releaseTime,status:"1"}})}function F(e){return Object(a["a"])({url:"/product",method:"put",data:{id:e.id,categoryCode:e.categoryCode,brandCode:e.brandCode,title:e.title,description:e.description,keyWords:e.keyWords,pictures:e.pictures,productDetail:e.productDetail,sortNo:e.sortNo,releaseTime:e.releaseTime,status:"1"}})}function $(e){return Object(a["a"])({url:"/product/".concat(e),method:"delete"})}function D(e){return Object(a["a"])({url:"/product/page",method:"post",data:{pageNo:e.pageNo,pageSize:e.pageSize,condition:{categoryCode:e.condition.categoryCode,brandCode:e.condition.brandCode,title:e.condition.title,status:e.condition.status||"1"}}})}function z(e){return _.apply(this,arguments)}function _(){return _=Object(r["a"])(Object(n["a"])().mark((function e(t){var o,r,s,c;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=new FormData,o.append("file",t),r=Object(i["a"])(),console.log("Token in uploadFile method:",r),e.next=6,Object(a["a"])({url:"/file/upload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:o});case 6:if(s=e.sent,!s.success){e.next=12;break}return c=s.data.fileName,e.abrupt("return",{id:c,url:c});case 12:throw console.error("图片上传失败:",s.msg),new Error("图片上传失败");case 14:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function q(e){return W.apply(this,arguments)}function W(){return W=Object(r["a"])(Object(n["a"])().mark((function e(t){var o,r,s,c;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=new FormData,o.append("file",t),r=Object(i["a"])(),console.log("Token in uploadAlbumFile method:",r),e.prev=4,e.next=7,Object(a["a"])({url:"/file/upload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:o});case 7:if(s=e.sent,console.log("Upload response in album method:",s),!s.success||"0"!==s.code){e.next=14;break}return c=s.data.fileName,e.abrupt("return",{id:c,url:c});case 14:throw console.error("相册图片上传失败:",s.msg),new Error(s.msg||"相册图片上传失败");case 16:e.next=22;break;case 18:throw e.prev=18,e.t0=e["catch"](4),console.error("相册上传文件过程中发生错误:",e.t0),e.t0;case 22:case"end":return e.stop()}}),e,null,[[4,18]])}))),W.apply(this,arguments)}},8301:function(e,t,o){},"9ed6":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-container"},[o("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,autocomplete:"on","label-position":"left"}},[o("div",{staticClass:"title-container"},[o("h3",{staticClass:"title"},[e._v("南京千川 后台管理系统")])]),o("el-form-item",{attrs:{prop:"username"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"user"}})],1),o("el-input",{ref:"username",attrs:{placeholder:"Username",name:"username",type:"text",tabindex:"1",autocomplete:"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),o("el-tooltip",{attrs:{content:"Caps lock is On",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[o("el-form-item",{attrs:{prop:"password"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"password"}})],1),o("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"Password",name:"password",tabindex:"2",autocomplete:"on"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:[function(t){return e.checkCapslock(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}]},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),o("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[o("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1)],1),o("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v(" Login ")]),o("div",{staticStyle:{position:"relative"}})],1),o("el-dialog",{attrs:{title:"Or connect with",visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t}}},[e._v(" Can not be simulated on local, so please combine you own business simulation! ! ! "),o("br"),o("br"),o("br"),o("social-sign")],1)],1)},r=[],a=(o("13d5"),o("b64b"),o("d3b7"),o("7c15")),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"social-signup-container"},[o("div",{staticClass:"sign-btn",on:{click:function(t){return e.wechatHandleClick("wechat")}}},[o("span",{staticClass:"wx-svg-container"},[o("svg-icon",{staticClass:"icon",attrs:{"icon-class":"wechat"}})],1),e._v(" WeChat ")]),o("div",{staticClass:"sign-btn",on:{click:function(t){return e.tencentHandleClick("tencent")}}},[o("span",{staticClass:"qq-svg-container"},[o("svg-icon",{staticClass:"icon",attrs:{"icon-class":"qq"}})],1),e._v(" QQ ")])])},s=[],c={name:"SocialSignin",methods:{wechatHandleClick:function(e){alert("ok")},tencentHandleClick:function(e){alert("ok")}}},u=c,d=(o("aa05"),o("2877")),l=Object(d["a"])(u,i,s,!1,null,"7309fbbb",null),p=l.exports,m=o("5f87"),f={name:"Login",components:{SocialSign:p},data:function(){var e=function(e,t,o){t.length<2?o(new Error("The password can not be less than 6 digits")):o()};return{loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur",validator:e}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{}}},watch:{$route:{handler:function(e){var t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0}},mounted:function(){""===this.loginForm.username?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus()},methods:{checkCapslock:function(e){var t=e.key;this.capsTooltip=t&&1===t.length&&t>="A"&&t<="Z"},showPwd:function(){var e=this;this.passwordType="password"===this.passwordType?"":"password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0;var o={username:e.loginForm.username,password:e.loginForm.password,clientId:"app",loginType:"1"};Object(a["s"])(o).then((function(t){if(t.success){var o=t.data.accessToken,n=t.data.refreshToken;e.$store.commit("user/SET_TOKEN",o),Object(m["c"])(o),localStorage.setItem("refreshToken",n),e.$axios.defaults.headers.common["Authorization"]="Bearer ".concat(o);var r=e.redirect||"/";e.$router.push({path:r,query:e.otherQuery})}else e.$message.error("Login failed, please check your credentials.");e.loading=!1})).catch((function(t){e.$message.error("Login failed, please try again."),console.error("Login error:",t),e.loading=!1}))}))},getOtherQuery:function(e){return Object.keys(e).reduce((function(t,o){return"redirect"!==o&&(t[o]=e[o]),t}),{})}}},g=f,h=(o("304a"),o("b8ce"),Object(d["a"])(g,n,r,!1,null,"916c8bc6",null));t["default"]=h.exports},aa05:function(e,t,o){"use strict";o("565d")},b8ce:function(e,t,o){"use strict";o("0ae1")}}]);