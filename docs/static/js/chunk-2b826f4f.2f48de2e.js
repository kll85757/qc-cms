(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b826f4f"],{"7c15":function(e,t,r){"use strict";r.d(t,"r",(function(){return c})),r.d(t,"y",(function(){return s})),r.d(t,"k",(function(){return u})),r.d(t,"l",(function(){return l})),r.d(t,"a",(function(){return d})),r.d(t,"t",(function(){return p})),r.d(t,"f",(function(){return b})),r.d(t,"s",(function(){return f})),r.d(t,"p",(function(){return m})),r.d(t,"i",(function(){return h})),r.d(t,"o",(function(){return w})),r.d(t,"w",(function(){return g})),r.d(t,"d",(function(){return y})),r.d(t,"n",(function(){return N})),r.d(t,"c",(function(){return k})),r.d(t,"v",(function(){return v})),r.d(t,"h",(function(){return O})),r.d(t,"b",(function(){return j})),r.d(t,"u",(function(){return C})),r.d(t,"g",(function(){return x})),r.d(t,"m",(function(){return S})),r.d(t,"e",(function(){return D})),r.d(t,"x",(function(){return T})),r.d(t,"j",(function(){return _})),r.d(t,"q",(function(){return W})),r.d(t,"A",(function(){return z})),r.d(t,"z",(function(){return L}));var n=r("c7eb"),a=r("1da1"),o=(r("a4d3"),r("e01a"),r("b0c0"),r("b775")),i=r("5f87");function c(e){return Object(o["a"])({url:"/user/page",method:"post",data:{pageNo:e.pageNo||1,pageSize:e.pageSize||10,condition:{title:e.title||"",categoryCode:e.categoryCode||"",status:e.status||"1"}}})}function s(e){return Object(o["a"])({url:"/user",method:"put",data:{userId:e.userId,nickName:e.nickName,avatar:e.avatar,sex:e.sex}})}function u(e){return Object(o["a"])({url:"/user/".concat(e),method:"delete"})}function l(e){return Object(o["a"])({url:"/album/page",method:"post",data:{pageNo:0,pageSize:10,condition:{name:""}}})}function d(e){return Object(o["a"])({url:"/album",method:"post",data:{name:e.name,picNum:e.picNum,sortNo:e.sortNo,description:e.description,picture:e.picture}})}function p(e){return Object(o["a"])({url:"/album",method:"put",data:{id:e.id,name:e.name,picNum:e.picNum,sortNo:e.sortNo,description:e.description,picture:e.picture}})}function b(e){return Object(o["a"])({url:"/album/".concat(e),method:"delete"})}function f(e){return Object(o["a"])({url:"/auth/login",method:"post",data:e})}function m(e){return Object(o["a"])({url:"/news/page",method:"post",data:{pageNo:e.pageNo||1,pageSize:e.pageSize||10,condition:{title:e.title||null,categoryCode:e.categoryCode||null,status:e.status||null}}})}function h(e){return Object(o["a"])({url:"/news/".concat(e),method:"delete"})}function w(e){return Object(o["a"])({url:"/news/".concat(e),method:"get"})}function g(e){return Object(o["a"])({url:"/news",method:"put",data:{id:e.id,title:e.title,categoryCode:e.categoryCode,pictures:e.pictures||[],keyWords:e.keyWords||[],sortNo:e.sortNo||0,productIds:e.productIds||[],status:e.status,releaseTime:e.releaseTime,newsDetail:e.newsDetail}})}function y(e){return Object(o["a"])({url:"/news",method:"post",data:{title:e.title,categoryCode:e.categoryCode,pictures:e.pictures||[],keyWords:e.keyWords||[],sortNo:e.sortNo||0,productIds:e.productIds||[],status:e.status,releaseTime:e.releaseTime,newsDetail:e.newsDetail}})}function N(e){var t,r,n,a;return Object(o["a"])({url:"/category/page",method:"post",data:{pageNo:e.pageNo||1,pageSize:e.pageSize||100,condition:{code:(null===(t=e.condition)||void 0===t?void 0:t.code)||null,name:(null===(r=e.condition)||void 0===r?void 0:r.name)||null,parentCode:(null===(n=e.condition)||void 0===n?void 0:n.parentCode)||null,groupCode:(null===(a=e.condition)||void 0===a?void 0:a.groupCode)||null}}})}function k(e){return Object(o["a"])({url:"/category",method:"post",data:{code:e.code,name:e.name,parentCode:e.parentCode,groupCode:e.groupCode,sortNo:e.sortNo}})}function v(e){return Object(o["a"])({url:"/category",method:"put",data:{id:e.id,code:e.code,name:e.name,parentCode:e.parentCode,groupCode:e.groupCode,sortNo:e.sortNo}})}function O(e){return Object(o["a"])({url:"/category/".concat(e),method:"delete"})}function j(e){return Object(o["a"])({url:"/brand",method:"post",data:{code:e.code,name:e.name,sortNo:e.sortNo}})}function C(e){return Object(o["a"])({url:"/brand",method:"put",data:{id:e.id,code:e.code,name:e.name,sortNo:e.sortNo}})}function x(e){return Object(o["a"])({url:"/brand/".concat(e),method:"delete"})}function S(e){return Object(o["a"])({url:"/brand/page",method:"post",data:{pageNo:e.pageNo||1,pageSize:e.pageSize||10,condition:{title:e.title||"",categoryCode:e.categoryCode||"",status:e.status||"1"}}})}function D(e){return Object(o["a"])({url:"/product",method:"post",data:{categoryCode:e.categoryCode,brandCode:e.brandCode,title:e.title,description:e.description,keyWords:e.keyWords,pictures:e.pictures,productDetail:e.productDetail,sortNo:e.sortNo,releaseTime:e.releaseTime,status:"1"}})}function T(e){return Object(o["a"])({url:"/product",method:"put",data:{id:e.id,categoryCode:e.categoryCode,brandCode:e.brandCode,title:e.title,description:e.description,keyWords:e.keyWords,pictures:e.pictures,productDetail:e.productDetail,sortNo:e.sortNo,releaseTime:e.releaseTime,status:"1"}})}function _(e){return Object(o["a"])({url:"/product/".concat(e),method:"delete"})}function W(e){return Object(o["a"])({url:"/product/page",method:"post",data:{pageNo:e.pageNo,pageSize:e.pageSize,condition:{categoryCode:e.condition.categoryCode,brandCode:e.condition.brandCode,title:e.condition.title,status:e.condition.status||"1"}}})}function z(e){return F.apply(this,arguments)}function F(){return F=Object(a["a"])(Object(n["a"])().mark((function e(t){var r,a,c,s;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("file",t),a=Object(i["a"])(),console.log("Token in uploadFile method:",a),e.next=6,Object(o["a"])({url:"/file/upload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:r});case 6:if(c=e.sent,!c.success){e.next=12;break}return s=c.data.fileName,e.abrupt("return",{id:s,url:s});case 12:throw console.error("图片上传失败:",c.msg),new Error("图片上传失败");case 14:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function L(e){return $.apply(this,arguments)}function $(){return $=Object(a["a"])(Object(n["a"])().mark((function e(t){var r,a,c,s;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("file",t),a=Object(i["a"])(),console.log("Token in uploadAlbumFile method:",a),e.prev=4,e.next=7,Object(o["a"])({url:"/file/upload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:r});case 7:if(c=e.sent,console.log("Upload response in album method:",c),!c.success||"0"!==c.code){e.next=14;break}return s=c.data.fileName,e.abrupt("return",{id:s,url:s});case 14:throw console.error("相册图片上传失败:",c.msg),new Error(c.msg||"相册图片上传失败");case 16:e.next=22;break;case 18:throw e.prev=18,e.t0=e["catch"](4),console.error("相册上传文件过程中发生错误:",e.t0),e.t0;case 22:case"end":return e.stop()}}),e,null,[[4,18]])}))),$.apply(this,arguments)}},"7c64":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"标题"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}}),r("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")]),r("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("新增")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.newsList,border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{label:"ID",prop:"id",width:"80px",align:"center"}}),r("el-table-column",{attrs:{label:"标题",prop:"title","min-width":"150px"}}),r("el-table-column",{attrs:{label:"发布时间",prop:"releaseTime",width:"180px",align:"center"}}),r("el-table-column",{attrs:{label:"今日点击数",prop:"todayClicks",width:"130px",align:"center"}}),r("el-table-column",{attrs:{label:"历史点击数",prop:"totalClicks",width:"130px",align:"center"}}),r("el-table-column",{attrs:{label:"状态",prop:"status",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-tag",{attrs:{type:"published"===n.status?"success":"info"}},[e._v(e._s(n.status))])]}}])}),r("el-table-column",{attrs:{label:"操作",width:"300px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),"published"!==n.status?r("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handlePublish(n)}}},[e._v("发布")]):e._e(),"published"===n.status?r("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleUnpublish(n)}}},[e._v("下架")]):e._e(),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(n)}}},[e._v("删除")])]}}])})],1),r("el-dialog",{attrs:{visible:e.dialogVisible,title:"新闻管理"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{attrs:{model:e.currentNews,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"标题"}},[r("el-input",{model:{value:e.currentNews.title,callback:function(t){e.$set(e.currentNews,"title",t)},expression:"currentNews.title"}})],1),r("el-form-item",{attrs:{label:"发布时间"}},[r("el-date-picker",{attrs:{type:"datetime"},model:{value:e.currentNews.releaseTime,callback:function(t){e.$set(e.currentNews,"releaseTime",t)},expression:"currentNews.releaseTime"}})],1),r("el-form-item",{attrs:{label:"关键词"}},[r("el-checkbox-group",{model:{value:e.currentNews.keyWords,callback:function(t){e.$set(e.currentNews,"keyWords",t)},expression:"currentNews.keyWords"}},[r("el-checkbox",{attrs:{label:"01"}},[e._v("产品咨询")]),r("el-checkbox",{attrs:{label:"02"}},[e._v("新闻资讯")])],1)],1),r("el-form-item",{attrs:{label:"新闻详情"}},[r("el-input",{attrs:{type:"textarea",rows:"6"},model:{value:e.currentNews.newsDetail,callback:function(t){e.$set(e.currentNews,"newsDetail",t)},expression:"currentNews.newsDetail"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1)],1)],1)},a=[],o=r("2909"),i=r("c7eb"),c=r("1da1"),s=(r("99af"),r("caad"),r("d81d"),r("2532"),r("4d90"),r("7c15"));function u(e){var t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0"),i=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(r,"-").concat(n," ").concat(a,":").concat(o,":").concat(i)}var l={data:function(){return{listQuery:{title:"",pageNo:1,pageSize:10},newsList:[],total:0,dialogVisible:!1,currentNews:{id:null,title:"",releaseTime:"",newsDetail:""}}},created:function(){this.fetchNewsList()},methods:{fetchNewsList:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function t(){var r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["p"])(e.listQuery);case 2:r=t.sent,r.success&&r.data?(e.newsList=r.data.records.map((function(e){return{id:e.id,title:e.title,releaseTime:e.releaseTime,todayClicks:e.todayClicks||0,totalClicks:e.totalClicks||0,status:1===e.status?"published":"draft"}})),e.total=r.data.total):e.$message.error(r.msg||"Failed to fetch news list");case 4:case"end":return t.stop()}}),t)})))()},handleFilter:function(){this.listQuery.pageNo=1,this.fetchNewsList()},handleCreate:function(){this.currentNews={id:null,title:"",releaseTime:u(new Date),newsDetail:"",keyWords:[],status:"1"},this.dialogVisible=!0},handleSave:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if((e.currentNews.keyWords.includes("01")||e.currentNews.keyWords.includes("02"))&&(e.currentNews.keyWords=Object(o["a"])(e.currentNews.keyWords)),!e.currentNews.id){t.next=6;break}return t.next=4,Object(s["w"])(e.currentNews);case 4:t.next=8;break;case 6:return t.next=8,Object(s["d"])(e.currentNews);case 8:e.dialogVisible=!1,e.fetchNewsList();case 10:case"end":return t.stop()}}),t)})))()},handleEdit:function(e){var t=this;return Object(c["a"])(Object(i["a"])().mark((function r(){var n;return Object(i["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(s["o"])(e.id);case 3:n=r.sent,n.success&&n.data?(t.currentNews={id:n.data.id,title:n.data.title,releaseTime:n.data.releaseTime,newsDetail:n.data.newsDetail||"",keyWords:n.data.keyWords||[],status:1===n.data.status?"published":"draft"},t.dialogVisible=!0):t.$message.error(n.msg||"Failed to fetch news details"),r.next=11;break;case 7:r.prev=7,r.t0=r["catch"](0),t.$message.error("An error occurred while fetching news details"),console.error(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))()},handleDelete:function(e){var t=this;return Object(c["a"])(Object(i["a"])().mark((function r(){return Object(i["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(s["i"])(e.id);case 2:t.fetchNewsList();case 3:case"end":return r.stop()}}),r)})))()},handlePublish:function(e){var t=this;return Object(c["a"])(Object(i["a"])().mark((function r(){return Object(i["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.status="published",r.next=3,Object(s["w"])(e);case 3:t.fetchNewsList();case 4:case"end":return r.stop()}}),r)})))()},handleUnpublish:function(e){var t=this;return Object(c["a"])(Object(i["a"])().mark((function r(){return Object(i["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.status="draft",r.next=3,Object(s["w"])(e);case 3:t.fetchNewsList();case 4:case"end":return r.stop()}}),r)})))()}}},d=l,p=r("2877"),b=Object(p["a"])(d,n,a,!1,null,null,null);t["default"]=b.exports}}]);